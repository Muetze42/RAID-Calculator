function RaidCalculate(){let e=$(".this-drive"),t=$(e).length;if(t<2)$("#raid-box").addClass("d-none"),$("#remove_msg").addClass("d-none"),$("#add_msg").removeClass("d-none");else{t>=$(server).data("maxdrives")?$(".add-drive").prop("disabled",!0):$(".add-drive").prop("disabled",!1),$("#raid-box").removeClass("d-none"),$("#remove_msg").removeClass("d-none"),$("#add_msg").addClass("d-none")}let a=0,d=0,s=$("#raid option:selected").val(),r=$("#showCalc");$(".raid-error").addClass("d-none"),$(r).removeClass("d-none"),$(e).each((function(){let e=$(this).val();a+=Number(e),d++}));let n=$(e).map((function(){return $(this).val()})).get(),o=Math.min.apply(Math,n),l=$("#storage"),i=$("#parity"),x=$("#unused"),c=t/2,B=Math.round(c);switch(s){case"0":$(l).text(a+" TB"),$(i).text("0 TB"),$(x).text("0 TB");break;case"1":$(l).text(o+" TB");let e=o*(d-1);$(i).text(e+" TB");let s=a-(e+o);$(x).text(s+" TB");break;case"5":if(t<3)$("#raid5error").removeClass("d-none"),$(r).addClass("d-none");else{$(i).text(o+" TB");let e=o*(d-1);$(l).text(e+" TB");let t=a-(e+o);$(x).text(t+" TB")}break;case"6":if(t<4)$("#raid6error").removeClass("d-none"),$(r).addClass("d-none");else{let e=d-2;$(l).text(e*o+" TB"),$(i).text(2*o+" TB");let t=a-d*o;$(x).text(t+" TB")}break;case"10":t<4||c!==B?($("#raid10error").removeClass("d-none"),$(r).addClass("d-none")):($(l).text(d*o/2+" TB"),$(i).text(d*o/2+" TB"),$(x).text(a-d*o+" TB"));break;case"50":if(t<6)$("#raid50error").removeClass("d-none"),$(r).addClass("d-none");else{let e=(d-2)*o;$(l).text(e+" TB");let t=2*o;$(i).text(t+" TB"),$(x).text(a-d*o+" TB")}break;case"51":if(t<6||c!==B)$("#raid51error").removeClass("d-none"),$(r).addClass("d-none");else{let e=(d/2-1)*o;$(l).text(e+" TB"),$(i).text(d*o-e+" TB"),$(x).text(a-d*o+" TB")}break;case"60":t<8?($("#raid60error").removeClass("d-none"),$(r).addClass("d-none")):($(l).text((d-4)*o+" TB"),$(i).text(4*o+" TB"),$(x).text(a-d*o+" TB"));break;case"61":if(t<8||c!==B)$("#raid61error").removeClass("d-none"),$(r).addClass("d-none");else{let e=d/2-2;$(l).text(e*o+" TB"),$(i).text((d-e)*o+" TB");let t=a-d*o;$(x).text(t+" TB")}break;case"5E":t<4?($("#raid5Eerror").removeClass("d-none"),$(r).addClass("d-none")):($(l).text((d-2)*o+" TB"),$(i).text(2*o+" TB"),$(x).text(a-d*o+" TB"))}}$(".add-drive").click((function(){let e=$(this).attr("id"),t=$("#server"),a=$(t).data("class"),d=$(t).data("prefix"),s=$(t).data("suffix");$(t).append('<button type="text" readonly class="'+a+'" value="'+e+'">'+d+e+s+"</button>"),RaidCalculate()})),$(document).on("click",".this-drive",(function(){$(this).closest("button").remove(),RaidCalculate()})),$("#raid").on("input",(function(){RaidCalculate()}));